<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2468 Game - Free 2468 & 2048 Number Puzzle Games Online | Play Now</title>
    <meta name="description" content="Play the best 2468 game online for free! Challenge your brain with 2468 puzzle games, 2048 variants, and 8 unique game modes. No download required - play instantly!">
    <meta name="keywords" content="2468 game, 2468, 2468 mah jong call, 2468 patch the pirate, 2468 ventures, 2048 puzzle, number puzzle games, free puzzle games, brain training games, logic puzzle, online puzzle, 2468 online, 2048 online, puzzle game free, number game, brain game, strategy game, mobile puzzle game, 2468 puzzle game, 2468 number game, 2468 brain training">
    <link rel="canonical" href="https://www.2468game.online/">
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <!-- Icon files removed as they don't exist - using SVG favicon only -->
    <link rel="manifest" href="/site.webmanifest">
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    <link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="sitemap" type="application/xml" href="/sitemap.xml">
    <link rel="alternate" type="application/rss+xml" title="2468 Game Online RSS" href="/rss.xml">
    <link rel="stylesheet" href="/styles.css">
    
    <!-- Open Graph -->
    <meta property="og:title" content="2468 Game Online - Free Number Puzzle Games">
    <meta property="og:description" content="Play the best 2468 and 2048 number puzzle games online for free. Challenge your brain with smooth gameplay!">
    <meta property="og:url" content="https://www.2468game.online/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://www.2468game.online/og-image.svg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:type" content="image/svg+xml">
    <meta property="og:image:alt" content="2468 Game Online - Free Number Puzzle Games">
    <meta property="og:site_name" content="2468 Game Online">
    <meta property="og:locale" content="en_US">
    <meta property="og:updated_time" content="2025-09-22T00:00:00Z">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@2468game">
    <meta name="twitter:title" content="2468 Game Online - Free Number Puzzle Games">
    <meta name="twitter:description" content="Play the best 2468 and 2048 number puzzle games online for free. Challenge your brain with smooth gameplay!">
    <meta name="twitter:image" content="https://www.2468game.online/og-image.svg">
    <meta name="twitter:image:alt" content="Play 2468 and 2048 number puzzle games online for free">
    
    <!-- Additional SEO -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    
    <!-- ÂÆâÂÖ®Á≠ñÁï• -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    <meta name="theme-color" content="#faf8f0">
    <meta name="color-scheme" content="light">
    
    <!-- ÁßªÂä®Á´Ø‰ºòÂåñ -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="2468 Game">
    
    <!-- Èò≤Ê≠¢ÁºìÂ≠ò -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <script src="https://cdn.tailwindcss.com" defer></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D1EDWD1K0M"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-D1EDWD1K0M');
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "2468 Game Online",
      "applicationCategory": "Game",
      "operatingSystem": "Web",
      "url": "https://www.2468game.online/",
      "inLanguage": "en",
      "image": "https://www.2468game.online/og-image.svg",
      "browserRequirements": "Requires JavaScript. Compatible with modern browsers.",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "2468 Game Online",
      "url": "https://www.2468game.online/",
      "logo": "https://www.2468game.online/favicon.svg",
      "sameAs": []
    }
    </script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "2468 Game Online",
      "url": "https://www.2468game.online/",
      "description": "Play the best 2468 and 2048 number puzzle games online for free. Challenge your brain with smooth gameplay!",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.2468game.online/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Game",
      "name": "2468 Game Online",
      "description": "Play the best 2468 and 2048 number puzzle games online for free. Challenge your brain with smooth gameplay!",
      "url": "https://www.2468game.online/",
      "inLanguage": "en",
      "image": "https://www.2468game.online/og-image.svg",
      "gamePlatform": "Web Browser",
      "applicationCategory": "Game",
      "genre": "Puzzle",
      "publisher": {
        "@type": "Organization",
        "name": "2468 Game Online"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
</head>
<body>
  <nav class="navbar" aria-label="Main">
    <div class="navbar-inner">
      <a href="index.html" style="text-decoration:none;display:flex;align-items:center;">
        <button class="menu-icon" id="menuIcon" aria-haspopup="true" aria-expanded="false" aria-controls="dropdownMenu" aria-label="Open menu">&#9776;</button>
        <span class="navbar-title">24682048</span>
      </a>
      <div class="dropdown-menu" id="dropdownMenu" aria-hidden="true">
        <ul>
          <li><a href="how-to-play.html">How to Play</a></li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a href="about.html">About Us</a></li>
          <li><a href="data.html">Statistics</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="terms.html">Terms of Service</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
      </div>
    </div>
  </nav>
  
  <!-- SEO H1 Tag (accessible sr-only) -->
  <h1 class="sr-only">2468 Game - Free 2468 & 2048 Number Puzzle Games Online</h1>
    <!-- Êú¨Âú∞2048Ê∏∏Êàè -->
    <div id="game-container" class="game-fullscreen">
        <div class="game-header">
            <div class="score-container">
                <div class="score-box">
                    <span class="score-label">SCORE</span>
                    <span id="score">0</span>
                </div>
                <div class="score-box">
                    <span class="score-label">BEST</span>
                    <span id="best-score">0</span>
                </div>
            </div>
            <div class="game-controls">
                <select id="game-mode-selector" class="game-mode-selector">
                    <option value="classic">Classic 2048</option>
                    <option value="3x3">3x3 Grid</option>
                    <option value="5x5">5x5 Grid</option>
                    <option value="fibonacci">Fibonacci</option>
                    <option value="powers3">Powers of 3</option>
                    <option value="powers5">Powers of 5</option>
                    <option value="reverse">Reverse 2048</option>
                    <option value="merge3">Merge 3 Tiles</option>
                </select>
                <button id="new-game-btn" class="new-game-btn">New Game</button>
            </div>
        </div>
        
        <div class="game-main-content">
            <div class="game-board-container">
                <div class="game-board" id="game-board">
                    <!-- Ê∏∏ÊàèÊ†ºÂ≠êÂ∞ÜÈÄöËøáJavaScriptÁîüÊàê -->
                </div>
            </div>
            
            <!-- ÊéíË°åÊ¶ú -->
            <div class="leaderboard-container" id="leaderboard-container">

                <div class="leaderboard-toggle-indicator">üèÜ</div>
                <h3 class="leaderboard-title">üèÜ Leaderboard</h3>
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" data-tab="global">Global</button>
                    <button class="tab-btn" data-tab="daily">Daily</button>
                </div>
                
                <div class="leaderboard-content">
                    <div class="tab-content active" id="global-tab">
                        <div class="leaderboard-list" id="global-leaderboard">
                            <!-- ÊéíË°åÊ¶úÊï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÁîüÊàê -->
                        </div>
                    </div>
                    
                    <div class="tab-content" id="friends-tab">
                        <div class="leaderboard-list" id="friends-leaderboard">
                            <!-- Â•ΩÂèãÊéíË°åÊ¶úÊï∞ÊçÆ -->
                        </div>
                    </div>
                    
                    <div class="tab-content" id="daily-tab">
                        <div class="leaderboard-list" id="daily-leaderboard">
                            <!-- ÊØèÊó•ÊéíË°åÊ¶úÊï∞ÊçÆ -->
                        </div>
                    </div>
                </div>
                
                <div class="leaderboard-actions">
                    <button id="refresh-leaderboard-btn" class="refresh-btn">Refresh</button>
                </div>
            </div>
        </div>
        
        <div class="game-message" id="game-message">
            <p></p>
            <div class="lower">
                <a class="retry-button">Try again</a>
            </div>
        </div>
    </div>

    <!-- AntiCrawler front-end logic removed for better SEO, accessibility, and performance -->
    <script>
        // Ê∏∏ÊàèÁõ∏ÂÖ≥ÂäüËÉΩ
        function showGame(idx) {
            // Ê∏∏ÊàèÂàáÊç¢ÂäüËÉΩ
        }

        // Menu functions moved to script.js to avoid conflicts

        // Dropdown menu logic moved to script.js to avoid conflicts

        // 2048Ê∏∏ÊàèÈÄªËæë
        class Game2048 {
            constructor() {
                this.currentMode = 'classic';
                this.grid = Array(4).fill().map(() => Array(4).fill(0));
                this.score = 0;
                this.bestScore = localStorage.getItem('bestScore') || 0;
                this.gameOver = false;
                this.gameWon = false;
                this.init();
            }

            init() {
                this.createBoard();
                this.addRandomTile();
                this.addRandomTile();
                this.updateDisplay();
                this.setupEventListeners();
            }

            setupEventListeners() {
                // ÈîÆÁõò‰∫ã‰ª∂
                document.addEventListener('keydown', (e) => {
                    if (this.gameOver) return;
                    
                    switch(e.key) {
                        case 'ArrowUp':
                            e.preventDefault();
                            this.move('up');
                            break;
                        case 'ArrowDown':
                            e.preventDefault();
                            this.move('down');
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            this.move('left');
                            break;
                        case 'ArrowRight':
                            e.preventDefault();
                            this.move('right');
                            break;
                    }
                });

                // Ëß¶Êë∏‰∫ã‰ª∂
                let startX, startY;
                document.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                });

                document.addEventListener('touchend', (e) => {
                    if (this.gameOver) return;
                    
                    const endX = e.changedTouches[0].clientX;
                    const endY = e.changedTouches[0].clientY;
                    const diffX = startX - endX;
                    const diffY = startY - endY;
                    
                    if (Math.abs(diffX) > Math.abs(diffY)) {
                        if (diffX > 0) this.move('left');
                        else this.move('right');
                    } else {
                        if (diffY > 0) this.move('up');
                        else this.move('down');
                    }
                });

                // Êñ∞Ê∏∏ÊàèÊåâÈíÆ
                document.getElementById('new-game-btn').addEventListener('click', () => {
                    this.newGame();
                });

                // ÈáçËØïÊåâÈíÆ
                document.querySelector('.retry-button').addEventListener('click', () => {
                    this.newGame();
                });

                // Ê∏∏ÊàèÊ®°ÂºèÈÄâÊã©Âô®
                document.getElementById('game-mode-selector').addEventListener('change', (e) => {
                    this.changeGameMode(e.target.value);
                });
            }

            move(direction) {
                let moved = false;
                
                switch(direction) {
                    case 'up':
                        moved = this.moveUp();
                        break;
                    case 'down':
                        moved = this.moveDown();
                        break;
                    case 'left':
                        moved = this.moveLeft();
                        break;
                    case 'right':
                        moved = this.moveRight();
                        break;
                }
                
                if (moved) {
                    this.addRandomTile();
                    this.updateDisplay();
                    this.checkGameState();
                }
            }

            getGameConfig(mode) {
                const configs = {
                    'classic': { size: 4, target: 2048, mergeRule: 'classic', sequence: [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048] },
                    '3x3': { size: 3, target: 512, mergeRule: 'classic', sequence: [2, 4, 8, 16, 32, 64, 128, 256, 512] },
                    '5x5': { size: 5, target: 4096, mergeRule: 'classic', sequence: [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096] },
                    'fibonacci': { size: 4, target: 2584, mergeRule: 'fibonacci', sequence: [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584] },
                    'powers3': { size: 4, target: 2187, mergeRule: 'powers3', sequence: [1, 3, 9, 27, 81, 243, 729, 2187] },
                    'powers5': { size: 4, target: 3125, mergeRule: 'powers5', sequence: [1, 5, 25, 125, 625, 3125] },
                    'reverse': { size: 4, target: 2, mergeRule: 'reverse', sequence: [2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2] },
                    'merge3': { size: 4, target: 2048, mergeRule: 'merge3', sequence: [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048] }
                };
                return configs[mode] || configs['classic'];
            }

            canMerge(a, b, mergeRule) {
                switch(mergeRule) {
                    case 'fibonacci':
                        // ÊñêÊ≥¢ÈÇ£Â•ëÊï∞ÂàóÔºö‰∏§‰∏™Áõ∏ÂêåÁöÑÊï∞ÂèØ‰ª•ÂêàÂπ∂Êàê‰∏ã‰∏Ä‰∏™ÊñêÊ≥¢ÈÇ£Â•ëÊï∞
                        if (a === b) {
                            const fib = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584];
                            const aIndex = fib.indexOf(a);
                            // ‰øÆÂ§çÔºöÂè™ÂÖÅËÆ∏Áõ∏ÂêåÊï∞ÂêàÂπ∂ÔºåÁ°Æ‰øùÊúâ‰∏ã‰∏Ä‰∏™ÊñêÊ≥¢ÈÇ£Â•ëÊï∞
                            return aIndex >= 0 && aIndex < fib.length - 1;
                        }
                        return false;
                    case 'powers3':
                        // 3ÁöÑÂπÇÊ¨°ÔºöÁõ∏ÂêåÊï∞ÂèØ‰ª•ÂêàÂπ∂
                        return a === b;
                    case 'powers5':
                        // 5ÁöÑÂπÇÊ¨°ÔºöÁõ∏ÂêåÊï∞ÂèØ‰ª•ÂêàÂπ∂
                        return a === b;
                    case 'reverse':
                        // ÂèçÂêëÔºöÂ§ßÊï∞ÂèØ‰ª•ÂêàÂπ∂ÊàêÂ∞èÊï∞
                        return a === b;
                    case 'merge3':
                        // ÂêàÂπ∂3‰∏™Áõ∏ÂêåÊï∞
                        return a === b;
                    default:
                        // ÁªèÂÖ∏ÔºöÁõ∏ÂêåÊï∞ÂèØ‰ª•ÂêàÂπ∂
                        return a === b;
                }
            }

            getMergeResult(a, b, mergeRule) {
                switch(mergeRule) {
                    case 'fibonacci':
                        // ÊñêÊ≥¢ÈÇ£Â•ëÊï∞ÂàóÁöÑ‰∏ã‰∏Ä‰∏™Êï∞
                        const fib = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584];
                        // ‰øÆÂ§çÔºöÂØπ‰∫é1+1=2ÔºåÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜ
                        if (a === 1 && b === 1) {
                            return 2;
                        }
                        // ÂØπ‰∫éÂÖ∂‰ªñÊï∞ÔºåÊâæÂà∞ÂΩìÂâçÊï∞Âú®Êï∞Âàó‰∏≠ÁöÑ‰ΩçÁΩÆÔºåËøîÂõû‰∏ã‰∏Ä‰∏™Êï∞
                        let currentIndex = -1;
                        for (let i = 0; i < fib.length; i++) {
                            if (fib[i] === a) {
                                currentIndex = i;
                                break;
                            }
                        }
                        if (currentIndex >= 0 && currentIndex < fib.length - 1) {
                            return fib[currentIndex + 1];
                        }
                        return a; // Â¶ÇÊûúÊ≤°Êúâ‰∏ã‰∏Ä‰∏™Êï∞ÔºåËøîÂõûÂéüÊï∞
                    case 'reverse':
                        // ÂèçÂêëÔºöÂ§ßÊï∞ÂêàÂπ∂ÊàêÂ∞èÊï∞Ôºå‰ΩÜ‰øùÊåÅÂêàÁêÜÁöÑÂàÜÊï∞Â¢ûÈïø
                        // ‰æãÂ¶ÇÔºö2048 + 2048 = 1024Ôºå‰ΩÜÂæóÂàÜÊòØÂêàÂπ∂ÂêéÁöÑÂÄº
                        return Math.min(a, b) / 2;
                    case 'merge3':
                        // ÂêàÂπ∂3‰∏™Áõ∏ÂêåÊï∞
                        return a * 2;
                    default:
                        // ÁªèÂÖ∏ÂíåÂÖ∂‰ªñÔºöÁõ∏ÂêåÊï∞ÂêàÂπ∂
                        return a + b;
                }
            }

            updateDisplay() {
                // Êõ¥Êñ∞ÂàÜÊï∞
                document.getElementById('score').textContent = this.score;
                document.getElementById('best-score').textContent = this.bestScore;
                
                // Êõ¥Êñ∞Ê†ºÂ≠ê
                const config = this.getGameConfig(this.currentMode);
                for (let i = 0; i < config.size; i++) {
                    for (let j = 0; j < config.size; j++) {
                        const cell = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
                        if (cell) {
                            const value = this.grid[i][j];
                            
                            cell.className = 'grid-cell';
                            if (value > 0) {
                                cell.textContent = value;
                                cell.classList.add(`tile-${value}`);
                            } else {
                                cell.textContent = '';
                            }
                        }
                    }
                }
            }

            moveLeft() {
                const config = this.getGameConfig(this.currentMode);
                let moved = false;
                
                for (let i = 0; i < config.size; i++) {
                    const row = this.grid[i].filter(x => x !== 0);
                    let newRow = [];
                    
                    if (config.mergeRule === 'merge3') {
                        // ÂêàÂπ∂3‰∏™Áõ∏ÂêåÊï∞ÁöÑÈÄªËæë
                        for (let j = 0; j < row.length; j++) {
                            if (j < row.length - 2 && row[j] === row[j + 1] && row[j] === row[j + 2]) {
                                newRow.push(this.getMergeResult(row[j], row[j + 1], config.mergeRule));
                                this.score += newRow[newRow.length - 1];
                                j += 2;
                            } else {
                                newRow.push(row[j]);
                            }
                        }
                    } else {
                        // ÁªèÂÖ∏ÂêàÂπ∂ÈÄªËæë
                        for (let j = 0; j < row.length; j++) {
                            if (j < row.length - 1 && this.canMerge(row[j], row[j + 1], config.mergeRule)) {
                                const mergeResult = this.getMergeResult(row[j], row[j + 1], config.mergeRule);
                                newRow.push(mergeResult);
                                this.score += mergeResult;
                                j++; // Ë∑≥Ëøá‰∏ã‰∏Ä‰∏™Êï∞ÔºåÂõ†‰∏∫Â∑≤ÁªèÂêàÂπ∂‰∫Ü
                            } else {
                                newRow.push(row[j]);
                            }
                        }
                    }
                    
                    const finalRow = newRow.concat(Array(config.size - newRow.length).fill(0));
                    if (JSON.stringify(this.grid[i]) !== JSON.stringify(finalRow)) {
                        moved = true;
                    }
                    this.grid[i] = finalRow;
                }
                return moved;
            }

            moveRight() {
                const config = this.getGameConfig(this.currentMode);
                let moved = false;
                
                for (let i = 0; i < config.size; i++) {
                    const row = this.grid[i].filter(x => x !== 0);
                    let newRow = [];
                    
                    if (config.mergeRule === 'merge3') {
                        // ‰ªéÂè≥Âà∞Â∑¶ÂêàÂπ∂3‰∏™Áõ∏ÂêåÊï∞
                        for (let j = row.length - 1; j >= 0; j--) {
                            if (j >= 2 && row[j] === row[j - 1] && row[j] === row[j - 2]) {
                                newRow.unshift(this.getMergeResult(row[j], row[j - 1], config.mergeRule));
                                this.score += newRow[0];
                                j -= 2;
                            } else {
                                newRow.unshift(row[j]);
                            }
                        }
                    } else {
                        // ÁªèÂÖ∏ÂêàÂπ∂ÈÄªËæë
                        for (let j = row.length - 1; j >= 0; j--) {
                            if (j > 0 && this.canMerge(row[j], row[j - 1], config.mergeRule)) {
                                newRow.unshift(this.getMergeResult(row[j], row[j - 1], config.mergeRule));
                                this.score += newRow[0];
                                j--;
                            } else {
                                newRow.unshift(row[j]);
                            }
                        }
                    }
                    
                    const finalRow = Array(config.size - newRow.length).fill(0).concat(newRow);
                    if (JSON.stringify(this.grid[i]) !== JSON.stringify(finalRow)) {
                        moved = true;
                    }
                    this.grid[i] = finalRow;
                }
                return moved;
            }

            moveUp() {
                const config = this.getGameConfig(this.currentMode);
                let moved = false;
                
                for (let j = 0; j < config.size; j++) {
                    let col = [];
                    for (let i = 0; i < config.size; i++) {
                        if (this.grid[i][j] !== 0) col.push(this.grid[i][j]);
                    }
                    
                    let newCol = [];
                    if (config.mergeRule === 'merge3') {
                        // ÂêàÂπ∂3‰∏™Áõ∏ÂêåÊï∞
                        for (let i = 0; i < col.length; i++) {
                            if (i < col.length - 2 && col[i] === col[i + 1] && col[i] === col[i + 2]) {
                                newCol.push(this.getMergeResult(col[i], col[i + 1], config.mergeRule));
                                this.score += newCol[newCol.length - 1];
                                i += 2;
                            } else {
                                newCol.push(col[i]);
                            }
                        }
                    } else {
                        // ÁªèÂÖ∏ÂêàÂπ∂ÈÄªËæë
                        for (let i = 0; i < col.length; i++) {
                            if (i < col.length - 1 && this.canMerge(col[i], col[i + 1], config.mergeRule)) {
                                newCol.push(this.getMergeResult(col[i], col[i + 1], config.mergeRule));
                                this.score += newCol[newCol.length - 1];
                                i++;
                            } else {
                                newCol.push(col[i]);
                            }
                        }
                    }
                    
                    const finalCol = newCol.concat(Array(config.size - newCol.length).fill(0));
                    for (let i = 0; i < config.size; i++) {
                        if (this.grid[i][j] !== finalCol[i]) {
                            moved = true;
                        }
                        this.grid[i][j] = finalCol[i];
                    }
                }
                return moved;
            }

            moveDown() {
                const config = this.getGameConfig(this.currentMode);
                let moved = false;
                
                for (let j = 0; j < config.size; j++) {
                    let col = [];
                    for (let i = 0; i < config.size; i++) {
                        if (this.grid[i][j] !== 0) col.push(this.grid[i][j]);
                    }
                    
                    let newCol = [];
                    if (config.mergeRule === 'merge3') {
                        // ‰ªé‰∏ãÂà∞‰∏äÂêàÂπ∂3‰∏™Áõ∏ÂêåÊï∞
                        for (let i = col.length - 1; i >= 0; i--) {
                            if (i >= 2 && col[i] === col[i - 1] && col[i] === col[i - 2]) {
                                newCol.unshift(this.getMergeResult(col[i], col[i - 1], config.mergeRule));
                                this.score += newCol[0];
                                i -= 2;
                            } else {
                                newCol.unshift(col[i]);
                            }
                        }
                    } else {
                        // ÁªèÂÖ∏ÂêàÂπ∂ÈÄªËæë
                        for (let i = col.length - 1; i >= 0; i--) {
                            if (i > 0 && this.canMerge(col[i], col[i - 1], config.mergeRule)) {
                                newCol.unshift(this.getMergeResult(col[i], col[i - 1], config.mergeRule));
                                this.score += newCol[0];
                                i--;
                            } else {
                                newCol.unshift(col[i]);
                            }
                        }
                    }
                    
                    const finalCol = Array(config.size - newCol.length).fill(0).concat(newCol);
                    for (let i = 0; i < config.size; i++) {
                        if (this.grid[i][j] !== finalCol[i]) {
                            moved = true;
                        }
                        this.grid[i][j] = finalCol[i];
                    }
                }
                return moved;
            }

            createBoard() {
                const gameBoard = document.getElementById('game-board');
                const config = this.getGameConfig(this.currentMode);
                gameBoard.innerHTML = '';
                
                // ËÆæÁΩÆÁΩëÊ†ºÂ§ßÂ∞è
                gameBoard.style.gridTemplateColumns = `repeat(${config.size}, 1fr)`;
                gameBoard.style.gridTemplateRows = `repeat(${config.size}, 1fr)`;
                gameBoard.style.width = `${config.size * 100 + (config.size - 1) * 15}px`;
                gameBoard.style.height = `${config.size * 100 + (config.size - 1) * 15}px`;
                
                // ÂàõÂª∫ÁΩëÊ†º
                this.grid = Array(config.size).fill().map(() => Array(config.size).fill(0));
                
                for (let i = 0; i < config.size; i++) {
                    for (let j = 0; j < config.size; j++) {
                        const cell = document.createElement('div');
                        cell.className = 'grid-cell';
                        cell.dataset.row = i;
                        cell.dataset.col = j;
                        gameBoard.appendChild(cell);
                    }
                }
            }

            addRandomTile() {
                const config = this.getGameConfig(this.currentMode);
                const emptyCells = [];
                for (let i = 0; i < config.size; i++) {
                    for (let j = 0; j < config.size; j++) {
                        if (this.grid[i][j] === 0) {
                            emptyCells.push({row: i, col: j});
                        }
                    }
                }
                
                if (emptyCells.length > 0) {
                    const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                    let value;
                    
                    switch(config.mergeRule) {
                        case 'fibonacci':
                            value = Math.random() < 0.8 ? 1 : 1;
                            break;
                        case 'powers3':
                            value = Math.random() < 0.8 ? 1 : 3;
                            break;
                        case 'powers5':
                            value = Math.random() < 0.8 ? 1 : 5;
                            break;
                        case 'reverse':
                            // ReverseÊ®°Âºè‰ΩøÁî®ËæÉÂ∞èÁöÑÂàùÂßãÂÄºÔºåÈÅøÂÖçÂàÜÊï∞ËøáÈ´ò
                            value = Math.random() < 0.8 ? 2 : 4;
                            break;
                        case 'merge3':
                            value = Math.random() < 0.8 ? 2 : 4;
                            break;
                        default:
                            value = Math.random() < 0.9 ? 2 : 4;
                    }
                    
                    this.grid[randomCell.row][randomCell.col] = value;
                }
            }

            checkGameState() {
                const config = this.getGameConfig(this.currentMode);
                
                // Ê£ÄÊü•ÊòØÂê¶Ëé∑ËÉú
                for (let i = 0; i < config.size; i++) {
                    for (let j = 0; j < config.size; j++) {
                        if (this.grid[i][j] === config.target && !this.gameWon) {
                            this.gameWon = true;
                            this.showMessage('You win!', 'game-won');
                            // Ê∏∏ÊàèËé∑ËÉúÊó∂Ëá™Âä®Â±ïÂºÄÊéíË°åÊ¶ú
                            this.expandLeaderboard();
                        }
                    }
                }

                // Ê£ÄÊü•ÊòØÂê¶Ê∏∏ÊàèÁªìÊùü
                if (this.isGameOver()) {
                    this.gameOver = true;
                    this.showMessage('Game Over!', 'game-over');
                    
                    // Ê∏∏ÊàèÁªìÊùüÊó∂Ëá™Âä®Â±ïÂºÄÊéíË°åÊ¶ú
                    this.expandLeaderboard();
                    
                    // Ê∏∏ÊàèÁªìÊùüÊó∂Ëá™Âä®Ê£ÄÊü•ÂàÜÊï∞ÊòØÂê¶ÂèØ‰ª•ËøõÂÖ•ÊéíË°åÊ¶ú
                    setTimeout(() => {
                        this.checkScoreForLeaderboard();
                    }, 1000); // Âª∂Ëøü1ÁßíÔºåËÆ©Áî®Êà∑ÁúãÂà∞Ê∏∏ÊàèÁªìÊùüÊ∂àÊÅØ
                }

                // Êõ¥Êñ∞ÊúÄÈ´òÂàÜ
                if (this.score > this.bestScore) {
                    this.bestScore = this.score;
                    localStorage.setItem('bestScore', this.bestScore);
                }
            }
            
            expandLeaderboard() {
                const leaderboardContainer = document.getElementById('leaderboard-container');
                if (leaderboardContainer) {
                    // Ê∑ªÂä†Ê∏∏ÊàèÂÆåÊàêÁä∂ÊÄÅ
                    leaderboardContainer.classList.add('game-completed');
                    leaderboardContainer.classList.remove('collapsed');
                    leaderboardContainer.classList.add('expanded');
                    
                    // 5ÁßíÂêéÁßªÈô§Ê∏∏ÊàèÂÆåÊàêÁä∂ÊÄÅÔºåÂÖÅËÆ∏Ëá™Âä®Êî∂Áº©
                    setTimeout(() => {
                        leaderboardContainer.classList.remove('game-completed');
                    }, 5000);
                }
            }
            
            keepLeaderboardExpanded() {
                const leaderboardContainer = document.getElementById('leaderboard-container');
                if (leaderboardContainer) {
                    // ‰øùÊåÅÂ±ïÂºÄÁä∂ÊÄÅÔºå‰∏çËá™Âä®Êî∂Áº©
                    leaderboardContainer.classList.remove('collapsed');
                    leaderboardContainer.classList.add('expanded');
                    leaderboardContainer.classList.add('game-completed');
                    
                    // 10ÁßíÂêéÂÖÅËÆ∏Ëá™Âä®Êî∂Áº©
                    setTimeout(() => {
                        leaderboardContainer.classList.remove('game-completed');
                    }, 10000);
                }
            }

            isGameOver() {
                const config = this.getGameConfig(this.currentMode);
                
                // Ê£ÄÊü•ÊòØÂê¶ÊúâÁ©∫Ê†º
                for (let i = 0; i < config.size; i++) {
                    for (let j = 0; j < config.size; j++) {
                        if (this.grid[i][j] === 0) return false;
                    }
                }

                // Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ÂêàÂπ∂
                for (let i = 0; i < config.size; i++) {
                    for (let j = 0; j < config.size; j++) {
                        const current = this.grid[i][j];
                        if ((i < config.size - 1 && this.canMerge(current, this.grid[i + 1][j], config.mergeRule)) ||
                            (j < config.size - 1 && this.canMerge(current, this.grid[i][j + 1], config.mergeRule))) {
                            return false;
                        }
                    }
                }
                return true;
            }

            showMessage(text, className) {
                const message = document.getElementById('game-message');
                message.querySelector('p').textContent = text;
                message.className = `game-message ${className}`;
            }

            newGame() {
                this.grid = Array(this.getGameConfig(this.currentMode).size).fill().map(() => Array(this.getGameConfig(this.currentMode).size).fill(0));
                this.score = 0;
                this.gameOver = false;
                this.gameWon = false;
                document.getElementById('game-message').className = 'game-message';
                this.createBoard();
                this.addRandomTile();
                this.addRandomTile();
                this.updateDisplay();
            }

            changeGameMode(mode) {
                this.currentMode = mode;
                this.newGame();
            }

            checkScoreForLeaderboard() {
                // Reverse 2048Ê®°Âºè‰∏çËÆ°ÂÖ•ÊéíË°åÊ¶ú
                if (this.currentMode === 'reverse') {
                    console.log('Reverse 2048 mode - score not eligible for leaderboard');
                    return;
                }
                
                // Ê£ÄÊü•ÂàÜÊï∞ÊòØÂê¶ÂèØ‰ª•ËøõÂÖ•ÊéíË°åÊ¶ú
                const shouldEnterLeaderboard = this.checkIfScoreQualifies(this.score);
                
                if (shouldEnterLeaderboard) {
                    // ÊòæÁ§∫ËæìÂÖ•ÂßìÂêçÊèêÁ§∫ÔºåÈò≤Ê≠¢ËæìÂÖ•ÁΩëÂùÄ
                    let playerName = '';
                    let isValidName = false;
                    
                    while (!isValidName) {
                        playerName = prompt('üéâ Congratulations! Your score qualifies for the leaderboard!\n\nEnter your name (max 10 characters, no URLs allowed):') || 'Anonymous';
                        
                        if (playerName === null) {
                            // Áî®Êà∑ÂèñÊ∂àËæìÂÖ•
                            return;
                        }
                        
                        // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´ÁΩëÂùÄ
                        if (isValidPlayerName(playerName)) {
                            isValidName = true;
                        } else {
                            alert('‚ùå Invalid name! Please enter a real name without URLs or special characters.');
                        }
                    }
                    
                    const trimmedName = playerName.trim().substring(0, 10);

                    // ÂàõÂª∫ÂàÜÊï∞ËÆ∞ÂΩï
                    const scoreRecord = {
                        rank: 0,
                        name: trimmedName,
                        score: this.score,
                        gameMode: getGameModeDisplayName(this.currentMode),
                        date: new Date().toLocaleDateString()
                    };

                    // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                    saveScoreToLeaderboard(scoreRecord);

                    // Âà∑Êñ∞ÊéíË°åÊ¶úÊòæÁ§∫
                    const activeTab = document.querySelector('.tab-btn.active')?.dataset.tab || 'global';
                    loadLeaderboardData(activeTab);

                    // ‰øùÊåÅÊéíË°åÊ¶úÂ±ïÂºÄÁä∂ÊÄÅ
                    this.keepLeaderboardExpanded();

                    alert(`üéä Amazing! You're now on the leaderboard!\nPlayer: ${trimmedName}\nScore: ${this.score.toLocaleString()}\nGame Mode: ${scoreRecord.gameMode}`);
                }
            }

            checkIfScoreQualifies(score) {
                const globalLeaderboard = JSON.parse(localStorage.getItem('leaderboard_global')) || [];
                
                if (globalLeaderboard.length < 10) {
                    return true; // ÊéíË°åÊ¶úÊú™Êª°Êó∂Ôºå‰ªª‰ΩïÂàÜÊï∞ÈÉΩÂèØ‰ª•ËøõÂÖ•
                }
                
                // Ê£ÄÊü•ÊòØÂê¶Ë∂ÖËøáÁ¨¨10ÂêçÁöÑÂàÜÊï∞
                const lowestScore = globalLeaderboard[globalLeaderboard.length - 1].score;
                return score > lowestScore;
            }
        }

        // ÂàùÂßãÂåñÊ∏∏Êàè
        let gameInstance;
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Initialize common functionality
                console.log('Initializing dropdown menu...');
                initializeDropdownMenu();
                console.log('Dropdown menu initialized');
                initializeSmoothScrolling();
                initializeButtonStates();
                
                // Initialize game
                gameInstance = new Game2048();
                // Á°Æ‰øùÊ∏∏ÊàèÂÆû‰æãÁªëÂÆöÂà∞ÂÖ®Â±Ä
                window.gameInstance = gameInstance;
                
                // ÂàùÂßãÂåñÊéíË°åÊ¶ú
                initLeaderboard();
                
                // Add fade-in animation to main content
                const mainContent = document.querySelector('.container, .game-fullscreen');
                if (mainContent) {
                    mainContent.style.opacity = '0';
                    mainContent.style.transform = 'translateY(20px)';
                    mainContent.style.transition = 'all 0.6s ease';
                    
                    setTimeout(() => {
                        mainContent.style.opacity = '1';
                        mainContent.style.transform = 'translateY(0)';
                    }, 100);
                }
                
                // Register Service Worker for PWA/offline support
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('/sw.js').catch(() => {});
                }
            } catch (error) {
                console.error('Error initializing game:', error);
            }
        });
        
        // ÊéíË°åÊ¶úÂäüËÉΩ
        function initLeaderboard() {
            // ÂàùÂßãÂåñÊéíË°åÊ¶ú‰∏∫Êî∂Áº©Áä∂ÊÄÅ
            const leaderboardContainer = document.getElementById('leaderboard-container');
            leaderboardContainer.classList.add('collapsed');
            
            // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂Êù•ÂàáÊç¢Â±ïÂºÄ/Êî∂Áº©Áä∂ÊÄÅ
            leaderboardContainer.addEventListener('click', function(e) {
                // Â¶ÇÊûúÁÇπÂáªÁöÑÊòØÊéíË°åÊ¶úÂÜÖÂÆπÂå∫ÂüüÔºå‰∏çÂàáÊç¢Áä∂ÊÄÅ
                if (e.target.closest('.leaderboard-content') || 
                    e.target.closest('.leaderboard-actions') ||
                    e.target.closest('.leaderboard-tabs')) {
                    return;
                }
                
                // ÂàáÊç¢Â±ïÂºÄ/Êî∂Áº©Áä∂ÊÄÅ
                if (this.classList.contains('expanded')) {
                    this.classList.remove('expanded');
                    this.classList.add('collapsed');
                } else {
                    this.classList.remove('collapsed');
                    this.classList.add('expanded');
                }
            });
            
            // Èº†Ê†áÁ¶ªÂºÄÊó∂Ëá™Âä®Êî∂Áº©ÔºàÂª∂ËøüÊâßË°åÔºâ
            let collapseTimeout;
            leaderboardContainer.addEventListener('mouseleave', function() {
                // Â¶ÇÊûú‰∏çÊòØÊ∏∏ÊàèÂÆåÊàêÁä∂ÊÄÅÔºåÂàôÂª∂ËøüÊî∂Áº©
                if (!this.classList.contains('game-completed')) {
                    collapseTimeout = setTimeout(() => {
                        if (!this.matches(':hover')) {
                            this.classList.remove('expanded');
                            this.classList.add('collapsed');
                        }
                    }, 1000); // 1ÁßíÂêéÊî∂Áº©
                }
            });
            
            // Èº†Ê†áËøõÂÖ•Êó∂Ê∏ÖÈô§Êî∂Áº©ÂÆöÊó∂Âô®
            leaderboardContainer.addEventListener('mouseenter', function() {
                if (collapseTimeout) {
                    clearTimeout(collapseTimeout);
                }
            });
            
            // Ê†áÁ≠æÈ°µÂàáÊç¢
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation(); // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°
                    
                    const targetTab = btn.dataset.tab;
                    
                    // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
                    tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Êõ¥Êñ∞ÂÜÖÂÆπÊòæÁ§∫
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${targetTab}-tab`) {
                            content.classList.add('active');
                        }
                    });
                    
                    // Âä†ËΩΩÂØπÂ∫îÊéíË°åÊ¶úÊï∞ÊçÆ
                    loadLeaderboardData(targetTab);
                });
            });

            // Ê∑ªÂä†ÊåâÈíÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
            const submitScoreBtn = document.getElementById('submit-score-btn');
            const refreshBtn = document.getElementById('refresh-leaderboard-btn');
            const clearSampleBtn = document.getElementById('clear-sample-btn');

            if (submitScoreBtn) {
                submitScoreBtn.addEventListener('click', checkAndUpdateLeaderboard);
            }

            if (refreshBtn) {
                refreshBtn.addEventListener('click', (e) => {
                    e.stopPropagation(); // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°
                    const activeTab = document.querySelector('.tab-btn.active').dataset.tab;
                    loadLeaderboardData(activeTab);
                });
            }

            if (clearSampleBtn) {
                clearSampleBtn.addEventListener('click', (e) => {
                    e.stopPropagation(); // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°
                    clearSampleData();
                });
            }
            
            // ÂàùÂßãÂåñÂä†ËΩΩÂÖ®ÁêÉÊéíË°åÊ¶ú
            loadLeaderboardData('global');
        }
        
        function loadLeaderboardData(type) {
            const leaderboardElement = document.getElementById(`${type}-leaderboard`);
            
            // ‰ªéÊú¨Âú∞Â≠òÂÇ®Ëé∑ÂèñÊï∞ÊçÆ
            let leaderboardData = JSON.parse(localStorage.getItem(`leaderboard_${type}`)) || [];
            
            // Âè™Âú®Á¨¨‰∏ÄÊ¨°Âä†ËΩΩ‰∏îÊ≤°ÊúâÁúüÂÆûÊï∞ÊçÆÊó∂ÁîüÊàêÁ§∫‰æãÊï∞ÊçÆ
            if (leaderboardData.length === 0 && !localStorage.getItem(`sample_data_generated_${type}`)) {
                // ÁîüÊàêÁ§∫‰æãÊï∞ÊçÆ
                leaderboardData = generateSampleData(type);
                localStorage.setItem(`leaderboard_${type}`, JSON.stringify(leaderboardData));
                localStorage.setItem(`sample_data_generated_${type}`, 'true');
            }
            
            // ÊåâÂàÜÊï∞ÊéíÂ∫è
            leaderboardData.sort((a, b) => b.score - a.score);
            
            // Ê∏≤ÊüìÊéíË°åÊ¶ú
            renderLeaderboard(leaderboardElement, leaderboardData);
        }
        
        function generateSampleData(type) {
            const sampleData = [];
            
            // Êõ¥ÁúüÂÆûÁöÑÊ∏∏ÊàèÊ®°ÂºèÂàÜÂ∏É
            const gameModes = {
                'classic': 'Classic 2048',
                '3x3': '3x3 Grid', 
                '5x5': '5x5 Grid',
                'fibonacci': 'Fibonacci',
                'powers3': 'Powers of 3',
                'powers5': 'Powers of 5',
                'reverse': 'Reverse 2048',
                'merge3': 'Merge 3 Tiles'
            };
            
            // Êõ¥ÁúüÂÆûÁöÑÁé©ÂÆ∂ÂêçÁß∞
            const playerNames = [
                'Alex', 'Sarah', 'Mike', 'Emma', 'David', 'Lisa', 'John', 'Anna', 'Tom', 'Sophie',
                'Chris', 'Maria', 'Ryan', 'Julia', 'Kevin', 'Rachel', 'Steve', 'Nina', 'Paul', 'Maya'
            ];
            
            // Ê†πÊçÆÊéíË°åÊ¶úÁ±ªÂûãÁîüÊàê‰∏çÂêåÁöÑÊï∞ÊçÆ
            if (type === 'global') {
                // ÂÖ®ÁêÉÊéíË°åÊ¶ú - È´òÂàÜÁé©ÂÆ∂
                const highScores = [
                    { name: 'Alex', score: 15680, mode: 'classic', daysAgo: 2 },
                    { name: 'Sarah', score: 14230, mode: '5x5', daysAgo: 1 },
                    { name: 'Mike', score: 13890, mode: 'fibonacci', daysAgo: 3 },
                    { name: 'Emma', score: 12560, mode: '3x3', daysAgo: 5 },
                    { name: 'David', score: 11870, mode: 'powers3', daysAgo: 1 },
                    { name: 'Lisa', score: 11240, mode: 'reverse', daysAgo: 4 },
                    { name: 'John', score: 10890, mode: 'merge3', daysAgo: 2 },
                    { name: 'Anna', score: 10230, mode: 'classic', daysAgo: 6 },
                    { name: 'Tom', score: 9870, mode: '5x5', daysAgo: 3 },
                    { name: 'Sophie', score: 9450, mode: 'fibonacci', daysAgo: 7 }
                ];
                
                highScores.forEach((player, index) => {
                    sampleData.push({
                        rank: index + 1,
                        name: player.name,
                        score: player.score,
                        gameMode: gameModes[player.mode],
                        date: new Date(Date.now() - player.daysAgo * 24 * 60 * 60 * 1000).toLocaleDateString()
                    });
                });
                
            } else if (type === 'daily') {
                // ÊØèÊó•ÊéíË°åÊ¶ú - ‰ªäÂ§©ÁöÑÊ¥ªË∑ÉÁé©ÂÆ∂
                const dailyScores = [
                    { name: 'Chris', score: 8920, mode: 'classic' },
                    { name: 'Maria', score: 8450, mode: '3x3' },
                    { name: 'Ryan', score: 7980, mode: '5x5' },
                    { name: 'Julia', score: 7560, mode: 'fibonacci' },
                    { name: 'Kevin', score: 7230, mode: 'powers3' },
                    { name: 'Rachel', score: 6890, mode: 'reverse' },
                    { name: 'Steve', score: 6540, mode: 'merge3' },
                    { name: 'Nina', score: 6210, mode: 'classic' },
                    { name: 'Paul', score: 5980, mode: '5x5' },
                    { name: 'Maya', score: 5720, mode: 'fibonacci' }
                ];
                
                dailyScores.forEach((player, index) => {
                    sampleData.push({
                        rank: index + 1,
                        name: player.name,
                        score: player.score,
                        gameMode: gameModes[player.mode],
                        date: new Date().toLocaleDateString()
                    });
                });
                
            } else if (type === 'friends') {
                // Â•ΩÂèãÊéíË°åÊ¶ú - ÊúãÂèãÈó¥ÁöÑÁ´û‰∫â
                const friendsScores = [
                    { name: 'Alex', score: 13450, mode: 'classic', daysAgo: 1 },
                    { name: 'Sarah', score: 12890, mode: '5x5', daysAgo: 2 },
                    { name: 'Mike', score: 12120, mode: 'fibonacci', daysAgo: 1 },
                    { name: 'Emma', score: 11560, mode: '3x3', daysAgo: 3 },
                    { name: 'David', score: 10980, mode: 'powers3', daysAgo: 2 },
                    { name: 'Lisa', score: 10340, mode: 'reverse', daysAgo: 1 },
                    { name: 'John', score: 9870, mode: 'merge3', daysAgo: 4 },
                    { name: 'Tom', score: 9450, mode: 'classic', daysAgo: 2 },
                    { name: 'Sophie', score: 9120, mode: '3x3', daysAgo: 1 },
                    { name: 'Anna', score: 8890, mode: '5x5', daysAgo: 3 }
                ];
                
                friendsScores.forEach((player, index) => {
                    sampleData.push({
                        rank: index + 1,
                        name: player.name,
                        score: player.score,
                        gameMode: gameModes[player.mode],
                        date: new Date(Date.now() - player.daysAgo * 24 * 60 * 60 * 1000).toLocaleDateString()
                    });
                });
            }
            
            return sampleData;
        }
        
        function renderLeaderboard(container, data) {
            if (data.length === 0) {
                container.innerHTML = `
                    <div class="empty-leaderboard">
                        <div class="icon">üèÜ</div>
                        <h4>No ranking data</h4>
                        <p>Be the first player to submit a score!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = data.map((player, index) => {
                const rankClass = index < 3 ? `rank-${index + 1}` : '';
                const medal = index < 3 ? ['ü•á', 'ü•à', 'ü•â'][index] : '';
                
                return `
                    <div class="leaderboard-item ${rankClass}">
                        <div class="rank-number">${medal || (index + 1)}</div>
                        <div class="player-info">
                            <div class="player-name">${player.name}</div>
                            <div class="player-score">${player.gameMode}</div>
                            <div class="game-mode">${player.date}</div>
                        </div>
                        <div class="score-value">${player.score.toLocaleString()}</div>
                    </div>
                `;
            }).join('');
        }
        

        
        function checkAndUpdateLeaderboard() {
    if (gameInstance) {
        // ‰ΩøÁî®Ê∏∏ÊàèÂÆû‰æãÁöÑÊñπÊ≥ïËá™Âä®Ê£ÄÊü•ÂàÜÊï∞
        gameInstance.checkScoreForLeaderboard();
    } else {
        alert('Game not initialized yet. Please wait a moment and try again.');
    }
}
        

        
        function getMinimumScoreForLeaderboard() {
            const globalLeaderboard = JSON.parse(localStorage.getItem('leaderboard_global')) || [];
            
            if (globalLeaderboard.length === 0) {
                return 1000; // ÈªòËÆ§ÊúÄ‰ΩéÂàÜÊï∞
            }
            
            if (globalLeaderboard.length < 10) {
                return 1000; // ÊéíË°åÊ¶úÊú™Êª°Êó∂
            }
            
            // ËøîÂõûÁ¨¨10ÂêçÁöÑÂàÜÊï∞
            return globalLeaderboard[globalLeaderboard.length - 1].score;
        }

        function isValidPlayerName(name) {
            if (!name || name.trim().length === 0) return false;
            
            // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´ÁΩëÂùÄÊ®°Âºè
            const urlPatterns = [
                /https?:\/\//i,           // http:// Êàñ https://
                /www\./i,                  // www.
                /\.com/i,                  // .com
                /\.org/i,                  // .org
                /\.net/i,                  // .net
                /\.cn/i,                   // .cn
                /\.qq\.com/i,              // .qq.com
                /\.baidu\.com/i,           // .baidu.com
                /\.google\.com/i,          // .google.com
                /\.github\.com/i,          // .github.com
                /[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/i,  // ÈÄöÁî®ÂüüÂêçÊ®°Âºè
                /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,  // IPÂú∞ÂùÄ
                /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/i  // ÈÇÆÁÆ±Âú∞ÂùÄ
            ];
            
            // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´ÁâπÊÆäÂ≠óÁ¨¶ÔºàÂè™ÂÖÅËÆ∏Â≠óÊØç„ÄÅÊï∞Â≠ó„ÄÅ‰∏≠Êñá„ÄÅÁ©∫Ê†º„ÄÅËøûÂ≠óÁ¨¶„ÄÅ‰∏ãÂàíÁ∫øÔºâ
            const validNamePattern = /^[a-zA-Z\u4e00-\u9fa5\s\-_0-9]+$/;
            
            // Ê£ÄÊü•ÈïøÂ∫¶
            if (name.trim().length > 20) return false;
            
            // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´ÁΩëÂùÄÊ®°Âºè
            for (const pattern of urlPatterns) {
                if (pattern.test(name)) {
                    return false;
                }
            }
            
            // Ê£ÄÊü•ÊòØÂê¶Âè™ÂåÖÂê´ÊúâÊïàÂ≠óÁ¨¶
            if (!validNamePattern.test(name)) {
                return false;
            }
            
            return true;
        }
        
        function getGameModeDisplayName(mode) {
            const modeNames = {
                'classic': 'Classic 2048',
                '3x3': '3x3 Grid',
                '5x5': '5x5 Grid',
                'fibonacci': 'Fibonacci',
                'powers3': 'Powers of 3',
                'powers5': 'Powers of 5',
                'reverse': 'Reverse 2048',
                'merge3': 'Merge 3 Tiles'
            };
            return modeNames[mode] || mode;
        }
        
        function clearSampleData() {
            // Ê∏ÖÈô§ÊâÄÊúâÁ§∫‰æãÊï∞ÊçÆ
            localStorage.removeItem('leaderboard_global');
            localStorage.removeItem('leaderboard_daily');
            localStorage.removeItem('leaderboard_friends');
            localStorage.removeItem('sample_data_generated_global');
            localStorage.removeItem('sample_data_generated_daily');
            localStorage.removeItem('sample_data_generated_friends');
            localStorage.removeItem('real_data_started');
            
            // Âà∑Êñ∞ÂΩìÂâçÊòæÁ§∫ÁöÑÊéíË°åÊ¶ú
            const activeTab = document.querySelector('.tab-btn.active').dataset.tab;
            loadLeaderboardData(activeTab);
            
            alert('Sample data cleared successfully! Leaderboards are now empty and ready for real scores.');
        }
        
        function saveScoreToLeaderboard(scoreRecord) {
            // ÂΩìÁî®Êà∑Êèê‰∫§Á¨¨‰∏Ä‰∏™ÁúüÂÆûÂàÜÊï∞Êó∂ÔºåÊ∏ÖÈô§Á§∫‰æãÊï∞ÊçÆ
            if (!localStorage.getItem('real_data_started')) {
                localStorage.setItem('real_data_started', 'true');
                // Ê∏ÖÈô§ÊâÄÊúâÁ§∫‰æãÊï∞ÊçÆÊ†áËÆ∞
                localStorage.removeItem('sample_data_generated_global');
                localStorage.removeItem('sample_data_generated_daily');
                localStorage.removeItem('sample_data_generated_friends');
            }
            
            // Save to global leaderboard (top 10 only)
            let globalLeaderboard = JSON.parse(localStorage.getItem('leaderboard_global')) || [];
            globalLeaderboard.push(scoreRecord);
            globalLeaderboard.sort((a, b) => b.score - a.score);
            globalLeaderboard = globalLeaderboard.slice(0, 10); // Keep top 10 only
            localStorage.setItem('leaderboard_global', JSON.stringify(globalLeaderboard));
            
            // Save to daily leaderboard
            const today = new Date().toDateString();
            let dailyLeaderboard = JSON.parse(localStorage.getItem('leaderboard_daily')) || [];
            
            // Remove old daily data
            dailyLeaderboard = dailyLeaderboard.filter(record => {
                const recordDate = new Date(record.date).toDateString();
                return recordDate === today;
            });
            
            dailyLeaderboard.push(scoreRecord);
            dailyLeaderboard.sort((a, b) => b.score - a.score);
            dailyLeaderboard = dailyLeaderboard.slice(0, 10); // Keep top 10 only
            localStorage.setItem('leaderboard_daily', JSON.stringify(dailyLeaderboard));
            
            // Save to friends leaderboard (using local storage simulation)
            let friendsLeaderboard = JSON.parse(localStorage.getItem('leaderboard_friends')) || [];
            friendsLeaderboard.push(scoreRecord);
            friendsLeaderboard.sort((a, b) => b.score - a.score);
            friendsLeaderboard = friendsLeaderboard.slice(0, 10); // Keep top 10 only
            localStorage.setItem('leaderboard_friends', JSON.stringify(friendsLeaderboard));
        }
    </script>
    <!-- ÂπøÂëä‰ΩçÁΩÆÈ¢ÑÁïô -->
    <div style="background: #f8f6f0; padding: 20px; text-align: center; margin: 20px 0; border: 2px dashed #d6cfc2; border-radius: 8px;">
        <p style="color: #7a6a58; margin: 0; font-size: 0.9rem;">Advertisement Space - AdSense Ready</p>
    </div>
    
    <!-- SEO Content Section -->
    <section style="background: #fff; padding: 40px 20px; margin-top: 20px;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="color: #7a6a58; text-align: center; font-size: 2rem; margin-bottom: 30px;">2468 Game - Free 2468 & 2048 Number Puzzle Games Online</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 40px;">
                <div style="background: #f8f6f0; padding: 25px; border-radius: 12px;">
                    <h3 style="color: #7a6a58; font-size: 1.5rem; margin-bottom: 15px;">üéÆ How to Play 2468 Game Online</h3>
                    <p style="color: #4a4e69; line-height: 1.6;">Master the <strong>2468 game</strong> with simple controls! Use arrow keys on desktop or swipe gestures on mobile to move tiles. When two tiles with the same number touch, they merge into one! Try to reach the 2468 tile to win this challenging <strong>2468 puzzle game</strong>. Plan your moves strategically and keep your highest tile in a corner for best results in this free online <strong>2468 brain training</strong> game. The <strong>2468</strong> number sequence makes this game unique and more challenging than traditional 2048 games.</p>
                </div>
                
                <div style="background: #f8f6f0; padding: 25px; border-radius: 12px;">
                    <h3 style="color: #7a6a58; font-size: 1.5rem; margin-bottom: 15px;">üß† 2468 Brain Training Benefits</h3>
                    <p style="color: #4a4e69; line-height: 1.6;">The <strong>2468 game</strong> is more than just a puzzle - it's a comprehensive <strong>2468 brain training</strong> exercise that improves logical thinking, strategic planning, and mathematical skills. Our <strong>2468 puzzle game</strong> collection offers unique challenges that enhance cognitive abilities. Perfect for students, professionals, and anyone who wants to keep their mind sharp with the <strong>2468</strong> number sequence challenge.</p>
                </div>
                
                <div style="background: #f8f6f0; padding: 25px; border-radius: 12px;">
                    <h3 style="color: #7a6a58; font-size: 1.5rem; margin-bottom: 15px;">üì± Play 2468 Game Anywhere</h3>
                    <p style="color: #4a4e69; line-height: 1.6;">Our <strong>2468 game</strong> works perfectly on all devices - desktop, tablet, and mobile. No downloads required, just open your browser and start playing the <strong>2468 puzzle game</strong>. Save your progress automatically and challenge your friends to beat your <strong>2468</strong> high score! Experience the unique <strong>2468 brain training</strong> challenge anywhere, anytime.</p>
                </div>
            </div>
            
            <!-- ÂπøÂëä‰ΩçÁΩÆÈ¢ÑÁïô -->
            <div style="background: #f8f6f0; padding: 20px; text-align: center; margin: 20px 0; border: 2px dashed #d6cfc2; border-radius: 8px;">
                <p style="color: #7a6a58; margin: 0; font-size: 0.9rem;">Advertisement Space - AdSense Ready</p>
            </div>
            
            <div style="background: #f0f8ff; padding: 30px; border-radius: 12px; margin-bottom: 30px;">
                <h3 style="color: #7a6a58; font-size: 1.8rem; margin-bottom: 20px; text-align: center;">üéØ Why Choose Our 2468 Game Platform?</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="text-align: center;">
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">‚ú® Free to Play</h4>
                        <p style="color: #4a4e69;">No registration, no downloads, no hidden costs. Enjoy unlimited gameplay completely free!</p>
                    </div>
                    <div style="text-align: center;">
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">üöÄ 2468 Game Modes</h4>
                        <p style="color: #4a4e69;">Try 8 different <strong>2468 game</strong> variants: Classic 2048, 3x3 Grid, 5x5 Grid, Fibonacci, Powers of 3/5, Reverse 2048, and Merge 3 Tiles! Each mode offers unique <strong>2468 puzzle game</strong> challenges.</p>
                    </div>
                    <div style="text-align: center;">
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">üß© Smart AI & Controls</h4>
                        <p style="color: #4a4e69;">Optimized for all devices with responsive design, touch controls, and intuitive keyboard navigation.</p>
                    </div>
                </div>
            </div>
            
            <div style="background: #fff5f5; padding: 25px; border-radius: 12px; margin-bottom: 30px;">
                <h3 style="color: #7a6a58; font-size: 1.5rem; margin-bottom: 15px;">üéÆ 2468 Game Features & Benefits</h3>
                <ul style="color: #4a4e69; line-height: 1.8; padding-left: 20px;">
                    <li><strong>8 <strong>2468 Game</strong> Modes:</strong> Classic 2048, 3x3 Grid, 5x5 Grid, Fibonacci, Powers of 3/5, Reverse 2048, and Merge 3 Tiles</li>
                    <li><strong>Smart Controls:</strong> Use arrow keys on desktop or swipe gestures on mobile for <strong>2468 puzzle game</strong></li>
                    <li><strong>2468 Score Tracking:</strong> Keep track of your best <strong>2468</strong> scores and challenge yourself to improve</li>
                    <li><strong>Leaderboard System:</strong> Compete with players worldwide in <strong>2468 brain training</strong> challenges</li>
                    <li><strong>Responsive Design:</strong> Perfect <strong>2468 game</strong> experience on any screen size</li>
                    <li><strong>No Registration:</strong> Start playing <strong>2468 puzzle game</strong> immediately without any sign-up required</li>
                    <li><strong>Local Storage:</strong> Your best <strong>2468</strong> scores are automatically saved in your browser</li>
                    <li><strong>Multiple Challenges:</strong> Each <strong>2468 game</strong> mode offers unique rules and strategies</li>
                </ul>
            </div>
            
            <div style="background: #f0f8ff; padding: 30px; border-radius: 12px;">
                <h3 style="color: #7a6a58; font-size: 1.8rem; margin-bottom: 20px; text-align: center;">‚ùì Frequently Asked Questions</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div>
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">What is the 2468 game?</h4>
                        <p style="color: #4a4e69; line-height: 1.6;">The <strong>2468 game</strong> is a number puzzle game similar to 2048, where you combine numbered tiles to reach higher numbers. The goal is to create the 2468 tile by merging tiles with the same numbers. Our <strong>2468 puzzle game</strong> offers unique challenges and <strong>2468 brain training</strong> benefits that make it more engaging than traditional number games.</p>
                    </div>
                    <div>
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">Is the 2468 game free to play?</h4>
                        <p style="color: #4a4e69; line-height: 1.6;">Yes! Our <strong>2468 game</strong> is completely free to play online. No registration, no downloads, and no hidden costs. Just open your browser and start playing the <strong>2468 puzzle game</strong> immediately. Experience the full <strong>2468 brain training</strong> challenge without any restrictions.</p>
                    </div>
                    <div>
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">How do I play the 2468 game on mobile?</h4>
                        <p style="color: #4a4e69; line-height: 1.6;">The <strong>2468 game</strong> works perfectly on mobile devices! Simply swipe in the direction you want to move the tiles. Our <strong>2468 puzzle game</strong> is fully responsive and optimized for touch controls, making <strong>2468 brain training</strong> accessible anywhere.</p>
                    </div>
                    <div>
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">What's the difference between the 2468 game and 2048?</h4>
                        <p style="color: #4a4e69; line-height: 1.6;">The <strong>2468 game</strong> is a variation of the classic 2048 game with different number sequences and scoring. Our <strong>2468 puzzle game</strong> offers unique challenges that make <strong>2468 brain training</strong> more engaging. Both are number puzzle games that challenge your logical thinking and strategic planning skills.</p>
                    </div>
                    <div>
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">Can I save my progress in the 2468 game?</h4>
                        <p style="color: #4a4e69; line-height: 1.6;">Yes! Your best <strong>2468</strong> scores are automatically saved in your browser's local storage. You can also compete on our global leaderboard and track your <strong>2468 brain training</strong> progress over time. Our <strong>2468 puzzle game</strong> remembers your achievements.</p>
                    </div>
                    <div>
                        <h4 style="color: #7a6a58; font-size: 1.2rem; margin-bottom: 10px;">Are there different game modes in the 2468 game?</h4>
                        <p style="color: #4a4e69; line-height: 1.6;">Absolutely! We offer 8 different <strong>2468 game</strong> modes including Classic 2048, 3x3 Grid, 5x5 Grid, Fibonacci, Powers of 3/5, Reverse 2048, and Merge 3 Tiles for endless <strong>2468 puzzle game</strong> fun. Each mode provides unique <strong>2468 brain training</strong> challenges.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <footer style="text-align: center; padding: 20px; color: #7a6a58; background: #faf8f0;">
        <p>Play the best <strong>2468 game</strong> and 2048 number puzzle games online for free! Challenge your brain with our collection of <strong>2468 puzzle game</strong> including 2468, 2048, and 8 unique game modes. Perfect for <strong>2468 brain training</strong>, logical thinking, and strategic planning. No download required - play the <strong>2468</strong> challenge instantly in your browser on desktop, tablet, or mobile devices.</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">¬© 2025 2468 Game Online - Free <strong>2468 Game</strong> | <strong>2468 Puzzle Game</strong> | 2048 Game | <strong>2468 Brain Training</strong> Games</p>
    </footer>

    <!-- ÂàÜÊï∞Êèê‰∫§Ê®°ÊÄÅÊ°Ü -->
    <div id="score-modal" class="score-modal" style="display: none;">
        <div class="score-modal-content">
            <h3>Submit Score</h3>
            <div class="score-info">
                <p>Current Score: <span id="modal-score">0</span></p>
                <p>Game Mode: <span id="modal-mode">Classic 2048</span></p>
            </div>
            <div class="name-input">
                <label for="player-name-input">Enter your name (max 10 characters):</label>
                <input type="text" id="player-name-input" maxlength="10" placeholder="Your name">
            </div>
            <div class="modal-actions">
                <button id="submit-score-confirm" class="submit-btn">Submit</button>
                <button id="cancel-score-submit" class="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>
    </script>
</body>
<script src="/script.js" defer></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/sw.js').catch(function(){});
    });
  }
</script>
</html>